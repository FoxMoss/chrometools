import*as e from"../../../core/i18n/i18n.js";import*as t from"../../lit-html/lit-html.js";import*as o from"../helpers/helpers.js";import*as r from"../icon_button/icon_button.js";import*as n from"../../../core/common/common.js";import*as i from"../../../core/platform/platform.js";import*as s from"../input/input.js";import*as a from"../../../core/host/host.js";import*as c from"../../../core/sdk/sdk.js";import*as d from"../../legacy/legacy.js";import*as l from"../../../models/bindings/bindings.js";const h=new CSSStyleSheet;h.replaceSync(".highlight-chip-list{min-height:20px;display:flex;flex-wrap:wrap;justify-content:left;align-items:center;background-color:var(--color-background);margin:8px 0;gap:8px;row-gap:6px}.highlight-chip{background:var(--color-background);border:1px solid var(--color-button-secondary-border);height:18px;border-radius:4px;flex:0 0 auto;max-width:250px;position:relative;padding:0 6px}.highlight-chip:hover{background-color:var(--color-background-elevation-1)}.delete-highlight-container{display:none;height:100%;position:absolute;right:0;top:0;border-radius:4px;width:24px;align-items:center;justify-content:center}.delete-highlight-button{cursor:pointer;width:13px;height:13px;border:none;background-color:transparent;display:flex;align-items:center;justify-content:center}.delete-highlight-button:hover{background-color:var(--color-details-hairline);border-radius:50%}.jump-to-highlight-button{cursor:pointer;padding:0;border:none;background:none;height:100%;align-items:center;max-width:100%;overflow:hidden}.delete-highlight-button devtools-icon{width:13px;height:13px;display:flex;align-items:center;justify-content:center;border-radius:50%}.source-code{font-family:var(--source-code-font-family);font-size:var(--source-code-font-size);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--color-text-primary)}.value{color:var(--color-syntax-2)}.separator{white-space:pre;flex-shrink:0}.highlight-chip.focused{border-color:var(--color-primary);background-color:var(--color-button-secondary-background-hovering)}.highlight-chip:hover > .delete-highlight-container{display:flex;background:linear-gradient(90deg,transparent 0%,rgb(241 243 244) 25%)}.highlight-chip.focused:hover > .delete-highlight-container{background:linear-gradient(90deg,transparent 0%,rgb(231 241 253) 25%)}:host-context(.-theme-with-dark-background) .highlight-chip:hover > .delete-highlight-container{display:flex;background:linear-gradient(90deg,transparent 0%,rgb(41 42 45) 25%)}:host-context(.-theme-with-dark-background) .highlight-chip.focused:hover > .delete-highlight-container{background:linear-gradient(90deg,transparent 0%,rgb(48 55 68) 25%)}\n/*# sourceURL=linearMemoryHighlightChipList.css */\n");const g={jumpToAddress:"Jump to this memory",deleteHighlight:"Stop highlighting this memory"},u=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryHighlightChipList.ts",g),p=e.i18n.getLocalizedString.bind(void 0,u),{render:m,html:b}=t;class f extends Event{static eventName="deletememoryhighlight";data;constructor(e){super(f.eventName,{bubbles:!0,composed:!0}),this.data=e}}class v extends Event{static eventName="jumptohighlightedmemory";data;constructor(e){super(v.eventName),this.data=e}}class y extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-highlight-chip-list`;#e=this.attachShadow({mode:"open"});#t=[];#o;connectedCallback(){this.#e.adoptedStyleSheets=[h]}set data(e){this.#t=e.highlightInfos,this.#o=e.focusedMemoryHighlight,this.#r()}#r(){const e=[];for(const t of this.#t)e.push(this.#n(t));const t=b` <div class="highlight-chip-list"> ${e} </div> `;m(t,this.#e,{host:this})}#n(e){const o=e.name||"<anonymous>",n=e.type,i={focused:e===this.#o,"highlight-chip":!0};return b` <div class="${t.Directives.classMap(i)}"> <button class="jump-to-highlight-button" title="${p(g.jumpToAddress)}" @click="${()=>this.#i(e.startAddress)}"> <span class="source-code"> <span class="value">${o}</span><span class="separator">: </span><span>${n}</span> </span> </button> <div class="delete-highlight-container"> <button class="delete-highlight-button" title="${p(g.deleteHighlight)}" @click="${()=>this.#s(e)}"> <${r.Icon.Icon.litTagName} .data="${{iconName:"close-icon",color:"var(--color-text-primary)",width:"7px"}}"> </${r.Icon.Icon.litTagName}> </button> </div> </div> `}#i(e){this.dispatchEvent(new v(e))}#s(e){this.dispatchEvent(new f(e))}}o.CustomElements.defineComponent("devtools-linear-memory-highlight-chip-list",y);var w=Object.freeze({__proto__:null,DeleteMemoryHighlightEvent:f,JumpToHighlightedMemoryEvent:v,LinearMemoryHighlightChipList:y});const x=new CSSStyleSheet;x.replaceSync(":host{flex:auto;display:flex}.view{width:100%;display:flex;flex:1;flex-direction:column;font-family:var(--monospace-font-family);font-size:var(--monospace-font-size);padding:9px 12px 9px 7px}devtools-linear-memory-inspector-viewer{justify-content:center}devtools-linear-memory-inspector-navigator + devtools-linear-memory-inspector-viewer{margin-top:12px}.value-interpreter{display:flex}\n/*# sourceURL=linearMemoryInspector.css */\n");const k=new CSSStyleSheet;k.replaceSync(".navigator{min-height:24px;display:flex;flex-wrap:nowrap;justify-content:space-between;overflow:hidden;align-items:center;background-color:var(--color-background);color:var(--color-text-primary)}.navigator-item{display:flex;white-space:nowrap;overflow:hidden}.address-input{text-align:center;outline:none;color:var(--color-text-primary);border:1px solid var(--color-background-elevation-2);background:transparent}.address-input.invalid{color:var(--color-accent-red)}.navigator-button{display:flex;width:20px;height:20px;background:transparent;overflow:hidden;border:none;padding:0;outline:none;justify-content:center;align-items:center;cursor:pointer}.navigator-button devtools-icon{height:14px;width:14px;min-height:14px;min-width:14px}.navigator-button:enabled:hover devtools-icon{--icon-color:var(--color-text-primary)}.navigator-button:enabled:focus devtools-icon{--icon-color:var(--color-text-secondary)}\n/*# sourceURL=linearMemoryNavigator.css */\n");const I={enterAddress:"Enter address",goBackInAddressHistory:"Go back in address history",goForwardInAddressHistory:"Go forward in address history",previousPage:"Previous page",nextPage:"Next page",refresh:"Refresh"},M=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryNavigator.ts",I),T=e.i18n.getLocalizedString.bind(void 0,M),{render:S,html:E}=t;class A extends Event{static eventName="addressinputchanged";data;constructor(e,t){super(A.eventName),this.data={address:e,mode:t}}}class $ extends Event{static eventName="pagenavigation";data;constructor(e){super($.eventName,{}),this.data=e}}class N extends Event{static eventName="historynavigation";data;constructor(e){super(N.eventName,{}),this.data=e}}class R extends Event{static eventName="refreshrequested";constructor(){super(R.eventName,{})}}class L extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-navigator`;#e=this.attachShadow({mode:"open"});#a="0";#c=void 0;#d=!0;#l=!1;#h=!1;connectedCallback(){this.#e.adoptedStyleSheets=[k]}set data(e){this.#a=e.address,this.#c=e.error,this.#d=e.valid,this.#l=e.canGoBackInHistory,this.#h=e.canGoForwardInHistory,this.#r();const t=this.#e.querySelector(".address-input");t&&("Submitted"===e.mode?t.blur():"InvalidSubmit"===e.mode&&t.select())}#r(){const e=E` <div class="navigator"> <div class="navigator-item"> ${this.#g({icon:"ic_undo_16x16_icon",title:T(I.goBackInAddressHistory),event:new N("Backward"),enabled:this.#l})} ${this.#g({icon:"ic_redo_16x16_icon",title:T(I.goForwardInAddressHistory),event:new N("Forward"),enabled:this.#h})} </div> <div class="navigator-item"> ${this.#g({icon:"ic_page_prev_16x16_icon",title:T(I.previousPage),event:new $("Backward"),enabled:!0})} ${this.#u()} ${this.#g({icon:"ic_page_next_16x16_icon",title:T(I.nextPage),event:new $("Forward"),enabled:!0})} </div> ${this.#g({icon:"refresh_12x12_icon",title:T(I.refresh),event:new R,enabled:!0})} </div> `;S(e,this.#e,{host:this})}#u(){const e={"address-input":!0,invalid:!this.#d};return E` <input class="${t.Directives.classMap(e)}" data-input="true" .value="${this.#a}" title="${this.#d?T(I.enterAddress):this.#c}" @change="${this.#p.bind(this,"Submitted")}" @input="${this.#p.bind(this,"Edit")}/">`}#p(e,t){const o=t.target;this.dispatchEvent(new A(o.value,e))}#g(e){const t=e.enabled?"var(--color-text-secondary)":"var(--color-background-highlight)";return E` <button class="navigator-button" ?disabled="${!e.enabled}" data-button="${e.event.type}" title="${e.title}" @click="${this.dispatchEvent.bind(this,e.event)}"> <${r.Icon.Icon.litTagName} .data="${{iconName:e.icon,color:t,width:"14px"}}"> </${r.Icon.Icon.litTagName}> </button>`}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-navigator",L);var O=Object.freeze({__proto__:null,AddressInputChangedEvent:A,PageNavigationEvent:$,HistoryNavigationEvent:N,RefreshRequestedEvent:R,LinearMemoryNavigator:L});const C=new CSSStyleSheet;C.replaceSync(":host{flex:auto;display:flex}.value-interpreter{--override-text-highlight-color:#80868b;border:var(--legacy-divider-border);background-color:var(--color-background-elevation-1);overflow:hidden;width:400px}.settings-toolbar{min-height:26px;display:flex;flex-wrap:nowrap;justify-content:space-between;padding-left:12px;padding-right:12px;align-items:center}.settings-toolbar-button{display:flex;justify-content:center;align-items:center;width:20px;height:20px;border:none;background-color:transparent;cursor:pointer}.settings-toolbar-button devtools-icon{height:14px;width:14px;min-height:14px;min-width:14px}.settings-toolbar-button.active devtools-icon{--icon-color:var(--color-primary)}.divider{display:block;height:1px;margin-bottom:12px;background-color:var(--color-details-hairline,#d0d0d0)}\n/*# sourceURL=linearMemoryValueInterpreter.css */\n");const j=new CSSStyleSheet;j.replaceSync('*{box-sizing:border-box;min-width:0;min-height:0}:root{height:100%;overflow:hidden;--legacy-accent-color:#1a73e8;--legacy-accent-fg-color:#1a73e8;--legacy-accent-color-hover:#3b86e8;--legacy-accent-fg-color-hover:#1567d3;--legacy-active-control-bg-color:#5a5a5a;--legacy-focus-bg-color:hsl(214deg 40% 92%);--legacy-focus-ring-inactive-shadow-color:#e0e0e0;--legacy-input-validation-error:#db1600;--legacy-toolbar-hover-bg-color:#eaeaea;--legacy-selection-fg-color:#fff;--legacy-selection-bg-color:var(--legacy-accent-color);--legacy-selection-inactive-fg-color:#5a5a5a;--legacy-selection-inactive-bg-color:#dadada;--legacy-tab-selected-fg-color:#333;--legacy-divider-border:1px solid var(--color-details-hairline);--legacy-focus-ring-inactive-shadow:0 0 0 1px var(--legacy-focus-ring-inactive-shadow-color);--legacy-focus-ring-active-shadow:0 0 0 1px var(--legacy-accent-color);--legacy-item-selection-bg-color:#cfe8fc;--legacy-item-selection-inactive-bg-color:#e0e0e0;--item-hover-color:rgb(56 121 217/10%);--monospace-font-size:10px;--monospace-font-family:monospace;--source-code-font-size:11px;--source-code-font-family:monospace;--override-force-white-icons-background:#fafafa}.-theme-with-dark-background{color-scheme:dark;--legacy-accent-color:#0e639c;--legacy-accent-fg-color:#ccc;--legacy-accent-fg-color-hover:#fff;--legacy-accent-color-hover:rgb(17 119 187);--legacy-active-control-bg-color:#cdcdcd;--legacy-focus-bg-color:hsl(214deg 19% 27%);--legacy-focus-ring-inactive-shadow-color:#5a5a5a;--legacy-toolbar-hover-bg-color:#202020;--legacy-selection-fg-color:#cdcdcd;--legacy-selection-inactive-fg-color:#cdcdcd;--legacy-selection-inactive-bg-color:hsl(0deg 0% 28%);--legacy-tab-selected-fg-color:#eaeaea;--legacy-focus-ring-inactive-shadow:0 0 0 1px var(--legacy-focus-ring-inactive-shadow-color);--legacy-item-selection-bg-color:hsl(207deg 88% 22%);--legacy-item-selection-inactive-bg-color:#454545}body{height:100%;width:100%;position:relative;overflow:hidden;margin:0;cursor:default;font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande",sans-serif;font-size:12px;tab-size:4;user-select:none;color:var(--color-text-primary);background:var(--color-background)}.platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.platform-mac{font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande",sans-serif}.platform-mac,\n.platform-linux{--override-text-color:rgb(48 57 66);color:var(--override-text-color)}.platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}:focus{outline-width:0}.platform-mac,\n:host-context(.platform-mac){--monospace-font-size:11px;--monospace-font-family:menlo,monospace;--source-code-font-size:11px;--source-code-font-family:menlo,monospace}.platform-windows,\n:host-context(.platform-windows){--monospace-font-size:12px;--monospace-font-family:consolas,lucida console,courier new,monospace;--source-code-font-size:12px;--source-code-font-family:consolas,lucida console,courier new,monospace}.platform-linux,\n:host-context(.platform-linux){--monospace-font-size:11px;--monospace-font-family:dejavu sans mono,monospace;--source-code-font-size:11px;--source-code-font-family:dejavu sans mono,monospace}.-theme-with-dark-background .platform-linux,\n.-theme-with-dark-background .platform-mac,\n:host-context(.-theme-with-dark-background) .platform-linux,\n:host-context(.-theme-with-dark-background) .platform-mac{--override-text-color:rgb(189 198 207)}.monospace{font-family:var(--monospace-font-family);font-size:var(--monospace-font-size)!important}.source-code{font-family:var(--source-code-font-family);font-size:var(--source-code-font-size)!important;white-space:pre-wrap}img{-webkit-user-drag:none}iframe,\na img{border:none}.fill{position:absolute;top:0;left:0;right:0;bottom:0}iframe.fill{width:100%;height:100%}.widget{position:relative;flex:auto;contain:style}.hbox{display:flex;flex-direction:row!important;position:relative}.vbox{display:flex;flex-direction:column!important;position:relative}.view-container > .toolbar{border-bottom:1px solid var(--color-details-hairline)}.flex-auto{flex:auto}.flex-none{flex:none}.flex-centered{display:flex;align-items:center;justify-content:center}.overflow-auto{overflow:auto;background-color:var(--color-background)}iframe.widget{position:absolute;width:100%;height:100%;left:0;right:0;top:0;bottom:0}.hidden{display:none!important}.highlighted-search-result{--override-highlighted-search-result-background-color:rgb(255 255 0/80%);border-radius:1px;background-color:var(--override-highlighted-search-result-background-color);outline:1px solid var(--override-highlighted-search-result-background-color)}.-theme-with-dark-background .highlighted-search-result,\n:host-context(.-theme-with-dark-background) .highlighted-search-result{--override-highlighted-search-result-background-color:hsl(133deg 100% 30%);color:#333}.link{cursor:pointer;text-decoration:underline;color:var(--color-link);outline-offset:2px}button,\ninput,\nselect{font-family:inherit;font-size:inherit}select option,\nselect optgroup,\ninput{background-color:var(--color-background)}input{color:inherit}input::placeholder{--override-input-placeholder-color:rgb(0 0 0/54%);color:var(--override-input-placeholder-color)}.-theme-with-dark-background input::placeholder,\n:host-context(.-theme-with-dark-background) input::placeholder{--override-input-placeholder-color:rgb(230 230 230/54%)}:host-context(.-theme-with-dark-background) input[type="checkbox"]:not(.-theme-preserve){accent-color:var(--color-checkbox-accent-color)}.harmony-input:not([type]),\n.harmony-input[type="number"],\n.harmony-input[type="text"]{padding:3px 6px;height:24px;border:none;box-shadow:var(--legacy-focus-ring-inactive-shadow)}.harmony-input:not([type]).error-input,\n.harmony-input[type="number"].error-input,\n.harmony-input[type="text"].error-input,\n.harmony-input:not([type]):invalid,\n.harmony-input[type="number"]:invalid,\n.harmony-input[type="text"]:invalid{box-shadow:0 0 0 1px var(--color-red)}.harmony-input:not([type]):not(.error-input):not(:invalid):hover,\n.harmony-input[type="number"]:not(.error-input):not(:invalid):hover,\n.harmony-input[type="text"]:not(.error-input):not(:invalid):hover{box-shadow:var(--legacy-focus-ring-inactive-shadow)}.harmony-input:not([type]):not(.error-input):not(:invalid):focus,\n.harmony-input[type="number"]:not(.error-input):not(:invalid):focus,\n.harmony-input[type="text"]:not(.error-input):not(:invalid):focus{box-shadow:var(--legacy-focus-ring-active-shadow)}.highlighted-search-result.current-search-result{--override-current-search-result-background-color:rgb(255 127 0/80%);border-radius:1px;padding:1px;margin:-1px;background-color:var(--override-current-search-result-background-color)}.dimmed{opacity:60%}.editing{box-shadow:var(--drop-shadow);background-color:var(--color-background);text-overflow:clip!important;padding-left:2px;margin-left:-2px;padding-right:2px;margin-right:-2px;margin-bottom:-1px;padding-bottom:1px;opacity:100%!important}.editing,\n.editing *{color:var(--color-text-primary)!important;text-decoration:none!important}.chrome-select{--override-chrome-select-border-color:rgb(0 0 0/20%);appearance:none;user-select:none;border:1px solid var(--override-chrome-select-border-color);border-radius:2px;color:var(--color-text-primary);font:inherit;margin:0;outline:none;padding-right:20px;padding-left:6px;background-image:var(--image-file-chromeSelect);background-color:var(--color-background-elevation-0);background-position:right center;background-repeat:no-repeat;min-height:24px;min-width:80px;background-size:15px}.chrome-select:disabled{opacity:38%}.-theme-with-dark-background .chrome-select,\n:host-context(.-theme-with-dark-background) .chrome-select{--override-chrome-select-border-color:rgb(230 230 230/20%);background-image:var(--image-file-chromeSelectDark)}.chrome-select:enabled:active,\n.chrome-select:enabled:focus,\n.chrome-select:enabled:hover{--override-select-box-shadow:0 0 0 2px var(--color-button-outline-focus);background-color:var(--color-background-elevation-1);box-shadow:var(--override-select-box-shadow)}.chrome-select:enabled:active{background-color:var(--color-background-elevation-2)}.chrome-select:enabled:focus{border-color:transparent}@media (forced-colors: active) and (prefers-color-scheme: light){.chrome-select{background-image:var(--image-file-chromeSelect)}.-theme-with-dark-background .chrome-select,\n  :host-context(.-theme-with-dark-background) .chrome-select{background-image:var(--image-file-chromeSelect)}}@media (forced-colors: active) and (prefers-color-scheme: dark){.chrome-select{background-image:var(--image-file-chromeSelectDark)}.-theme-with-dark-background .chrome-select,\n  :host-context(.-theme-with-dark-background) .chrome-select{background-image:var(--image-file-chromeSelectDark)}}.-theme-with-dark-background .chrome-select:enabled:active,\n.-theme-with-dark-background .chrome-select:enabled:focus,\n.-theme-with-dark-background .chrome-select:enabled:hover,\n:host-context(.-theme-with-dark-background) .chrome-select:enabled:active,\n:host-context(.-theme-with-dark-background) .chrome-select:enabled:focus,\n:host-context(.-theme-with-dark-background) .chrome-select:enabled:hover{--override-select-box-shadow:0 0 0 2px var(--color-button-outline-focus)}.chrome-select-label{margin:0 22px;flex:none}.chrome-select-label p p{margin-top:0;color:var(--color-text-secondary)}.settings-select{margin:0}.chrome-select optgroup,\n.chrome-select option{background-color:var(--color-background-elevation-1);color:var(--color-text-primary)}.gray-info-message{text-align:center;font-style:italic;padding:6px;color:var(--color-text-secondary);white-space:nowrap}span[is="dt-icon-label"]{flex:none}.full-widget-dimmed-banner a{color:inherit}.full-widget-dimmed-banner{color:var(--color-text-secondary);background-color:var(--color-background);display:flex;justify-content:center;align-items:center;text-align:center;padding:20px;position:absolute;top:0;right:0;bottom:0;left:0;font-size:13px;overflow:auto;z-index:500}[is="ui-icon"]{display:inline-block;flex-shrink:0}.-theme-with-dark-background [is="ui-icon"].icon-invert,\n:host-context(.-theme-with-dark-background) [is="ui-icon"].icon-invert{filter:invert(80%) hue-rotate(180deg)}[is="ui-icon"].icon-mask{--override-icon-mask-background-color:rgb(110 110 110);background-color:var(--override-icon-mask-background-color);-webkit-mask-position:var(--spritesheet-position)}.-theme-with-dark-background [is="ui-icon"].icon-mask,\n:host-context(.-theme-with-dark-background) [is="ui-icon"].icon-mask{--override-icon-mask-background-color:rgb(145 145 145)}[is="ui-icon"]:not(.icon-mask){background-position:var(--spritesheet-position)}.spritesheet-smallicons:not(.icon-mask){background-image:var(--image-file-smallIcons)}.spritesheet-smallicons.icon-mask{-webkit-mask-image:var(--image-file-smallIcons)}.spritesheet-largeicons:not(.icon-mask){background-image:var(--image-file-largeIcons)}.spritesheet-largeicons.icon-mask{-webkit-mask-image:var(--image-file-largeIcons)}.spritesheet-mediumicons:not(.icon-mask){background-image:var(--image-file-mediumIcons)}.spritesheet-mediumicons.icon-mask{-webkit-mask-image:var(--image-file-mediumIcons)}.spritesheet-arrowicons{background-image:var(--image-file-popoverArrows)}.force-white-icons [is="ui-icon"].spritesheet-smallicons,\n:host-context(.force-white-icons) [is="ui-icon"].spritesheet-smallicons,\n[is="ui-icon"].force-white-icons.spritesheet-smallicons,\n.-theme-preserve{-webkit-mask-image:var(--image-file-smallIcons);-webkit-mask-position:var(--spritesheet-position);background:var(--override-force-white-icons-background)!important}.force-white-icons [is="ui-icon"].spritesheet-largeicons,\n:host-context(.force-white-icons) [is="ui-icon"].spritesheet-largeicons,\n[is="ui-icon"].force-white-icons.spritesheet-largeicons,\n.-theme-preserve{-webkit-mask-image:var(--image-file-largeIcons);-webkit-mask-position:var(--spritesheet-position);background:var(--override-force-white-icons-background)!important}.force-white-icons [is="ui-icon"].spritesheet-mediumicons,\n:host-context(.force-white-icons) [is="ui-icon"].spritesheet-mediumicons,\n[is="ui-icon"].force-white-icons.spritesheet-mediumicons,\n.-theme-preserve{-webkit-mask-image:var(--image-file-mediumIcons);-webkit-mask-position:var(--spritesheet-position);background:var(--override-force-white-icons-background)!important}.mediumicon-file-sync.purple-dot{filter:hue-rotate(160deg)}.-theme-with-dark-background [is="ui-icon"].icon-invert.mediumicon-file-sync.purple-dot,\n:host-context(.-theme-with-dark-background) [is="ui-icon"].icon-invert.mediumicon-file-sync.purple-dot{filter:invert(80%) hue-rotate(350deg)}.expandable-inline-button{background-color:var(--color-background-elevation-2);color:var(--color-text-primary);cursor:pointer;border-radius:3px}.undisplayable-text,\n.expandable-inline-button{padding:1px 3px;margin:0 2px;font-size:11px;font-family:sans-serif;white-space:nowrap;display:inline-block}.undisplayable-text::after,\n.expandable-inline-button::after{content:attr(data-text)}.undisplayable-text{color:var(--color-text-disabled);font-style:italic}.expandable-inline-button:hover,\n.expandable-inline-button:focus-visible{background-color:var(--color-background-elevation-1)}.expandable-inline-button:focus-visible{background-color:var(--color-background-elevation-1)}::selection{--override-selection-background-color:rgb(141 199 248/60%);background-color:var(--override-selection-background-color)}.-theme-with-dark-background *::selection,\n:host-context(.-theme-with-dark-background) *::selection{background-color:rgb(93 93 93/60%)}.reload-warning{align-self:center;margin-left:10px}button.link{border:none;background:none;padding:3px}button.link:focus-visible{--override-link-focus-background-color:rgb(0 0 0/8%);background-color:var(--override-link-focus-background-color);border-radius:2px}.-theme-with-dark-background button.link:focus-visible,\n:host-context(.-theme-with-dark-background) button.link:focus-visible{--override-link-focus-background-color:rgb(230 230 230/8%)}@media (forced-colors: active){.dimmed,\n  .chrome-select:disabled{opacity:100%}[is="ui-icon"].icon-mask,\n  .force-white-icons [is="ui-icon"].spritesheet-smallicons,\n  :host-context(.force-white-icons) [is="ui-icon"].spritesheet-smallicons,\n  [is="ui-icon"].force-white-icons.spritesheet-smallicons,\n  .force-white-icons [is="ui-icon"].spritesheet-largeicons,\n  :host-context(.force-white-icons) [is="ui-icon"].spritesheet-largeicons,\n  [is="ui-icon"].force-white-icons.spritesheet-largeicons,\n  .force-white-icons [is="ui-icon"].spritesheet-mediumicons,\n  :host-context(.force-white-icons) [is="ui-icon"].spritesheet-mediumicons,\n  [is="ui-icon"].force-white-icons.spritesheet-mediumicons,\n  .-theme-preserve{forced-color-adjust:none;background-color:ButtonText}.harmony-input:not([type]),\n  .harmony-input[type="number"],\n  .harmony-input[type="text"]{border:1px solid ButtonText}.harmony-input:not([type]):focus,\n  .harmony-input[type="number"]:focus,\n  .harmony-input[type="text"]:focus{border:1px solid Highlight}}input.custom-search-input::-webkit-search-cancel-button{appearance:none;cursor:pointer;width:16px;height:15px;margin-right:0;background-position:-32px 32px;background-image:var(--image-file-mediumIcons)}.spinner::before{display:block;width:var(--dimension,24px);height:var(--dimension,24px);border:var(--override-spinner-size,3px) solid var(--override-spinner-color,var(--color-text-secondary));border-radius:12px;clip:rect(0,var(--clip-size,15px),var(--clip-size,15px),0);content:"";position:absolute;animation:spinner-animation 1s linear infinite;box-sizing:border-box}@keyframes spinner-animation{from{transform:rotate(0)}to{transform:rotate(360deg)}}.adorner-container{display:inline-block}.adorner-container.hidden{display:none}.adorner-container devtools-adorner{margin-left:3px}:host-context(.-theme-with-dark-background) devtools-adorner{--override-adorner-background-color:rgb(var(--color-syntax-2-rgb)/15%);--override-adorner-border-color:rgb(var(--color-syntax-2-rgb)/50%);--override-adorner-focus-border-color:var(--color-syntax-2);--override-adorner-active-background-color:var(--color-syntax-8)}.panel{display:flex;overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0;z-index:0;background-color:var(--color-background)}.panel-sidebar{overflow-x:hidden;background-color:var(--color-background-elevation-1)}iframe.extension{flex:auto;width:100%;height:100%}iframe.panel.extension{display:block;height:100%}@media (forced-colors: active){:root{--legacy-accent-color:Highlight;--legacy-focus-ring-inactive-shadow-color:ButtonText}}\n/*# sourceURL=inspectorCommon.css */\n');const H=new CSSStyleSheet;H.replaceSync(":host{flex:auto;display:flex}.mode-type{color:var(--override-text-highlight-color)}.value-types{width:100%;display:grid;grid-template-columns:auto auto 1fr;gap:4px 24px;min-height:24px;overflow:hidden;padding:2px 12px;align-items:baseline;justify-content:start}.value-type-cell{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:flex;flex-direction:column;min-height:24px}.value-type-value-with-link{display:flex;align-items:center}.value-type-cell-no-mode{grid-column:1/3}.jump-to-button{display:flex;width:20px;height:20px;border:none;padding:0;outline:none;justify-content:center;align-items:center;cursor:pointer}.signed-divider{width:1px;height:15px;background-color:var(--color-details-hairline);margin:0 4px}.selectable-text{user-select:text}.selectable-text::selection{background-color:var(--legacy-item-selection-bg-color)}\n/*# sourceURL=valueInterpreterDisplay.css */\n");const _={notApplicable:"N/A"},P=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/ValueInterpreterDisplayUtils.ts",_),z=e.i18n.getLocalizedString.bind(void 0,P);function B(){return new Map(V)}const V=new Map([["Integer 8-bit","dec"],["Integer 16-bit","dec"],["Integer 32-bit","dec"],["Integer 64-bit","dec"],["Float 32-bit","dec"],["Float 64-bit","dec"],["Pointer 32-bit","hex"],["Pointer 64-bit","hex"]]),D=["dec","hex","oct","sci"];function U(t){return e.i18n.lockedString(t)}function F(e,t){switch(e){case"Integer 8-bit":case"Integer 16-bit":case"Integer 32-bit":case"Integer 64-bit":return"dec"===t||"hex"===t||"oct"===t;case"Float 32-bit":case"Float 64-bit":return"sci"===t||"dec"===t;case"Pointer 32-bit":case"Pointer 64-bit":return"hex"===t;default:return i.assertNever(e,`Unknown value type: ${e}`)}}function q(e){switch(e){case"Integer 8-bit":case"Integer 16-bit":case"Integer 32-bit":case"Integer 64-bit":case"Float 32-bit":case"Float 64-bit":return!0;default:return!1}}function G(e,t,o){if(!W(e))return console.error(`Requesting address of a non-pointer type: ${e}.\n`),NaN;try{const r=new DataView(t),n="Little Endian"===o;return"Pointer 32-bit"===e?r.getUint32(0,n):r.getBigUint64(0,n)}catch(e){return NaN}}function W(e){return"Pointer 32-bit"===e||"Pointer 64-bit"===e}function J(e){if(!e.mode)return console.error(`No known way of showing value for ${e.type}`),z(_.notApplicable);const t=new DataView(e.buffer),o="Little Endian"===e.endianness;let r;try{switch(e.type){case"Integer 8-bit":return r=e.signed?t.getInt8(0):t.getUint8(0),X(r,e.mode);case"Integer 16-bit":return r=e.signed?t.getInt16(0,o):t.getUint16(0,o),X(r,e.mode);case"Integer 32-bit":return r=e.signed?t.getInt32(0,o):t.getUint32(0,o),X(r,e.mode);case"Integer 64-bit":return r=e.signed?t.getBigInt64(0,o):t.getBigUint64(0,o),X(r,e.mode);case"Float 32-bit":return r=t.getFloat32(0,o),K(r,e.mode);case"Float 64-bit":return r=t.getFloat64(0,o),K(r,e.mode);case"Pointer 32-bit":return r=t.getUint32(0,o),X(r,"hex");case"Pointer 64-bit":return r=t.getBigUint64(0,o),X(r,"hex");default:return i.assertNever(e.type,`Unknown value type: ${e.type}`)}}catch(e){return z(_.notApplicable)}}function K(e,t){switch(t){case"dec":return e.toFixed(2).toString();case"sci":return e.toExponential(2).toString();default:throw new Error(`Unknown mode for floats: ${t}.`)}}function X(e,t){switch(t){case"dec":return e.toString();case"hex":return e<0?z(_.notApplicable):"0x"+e.toString(16).toUpperCase();case"oct":return e<0?z(_.notApplicable):e.toString(8);default:throw new Error(`Unknown mode for integers: ${t}.`)}}var Y=Object.freeze({__proto__:null,VALUE_INTEPRETER_MAX_NUM_BYTES:8,getDefaultValueTypeMapping:B,VALUE_TYPE_MODE_LIST:D,valueTypeToLocalizedString:U,isValidMode:F,isNumber:q,getPointerAddress:G,isPointer:W,format:J,formatFloat:K,formatInteger:X});const Q={unsignedValue:"`Unsigned` value",changeValueTypeMode:"Change mode",signedValue:"`Signed` value",jumpToPointer:"Jump to address",addressOutOfRange:"Address out of memory range"},Z=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/ValueInterpreterDisplay.ts",Q),ee=e.i18n.getLocalizedString.bind(void 0,Z),{render:te,html:oe}=t,re=Array.from(B().keys());class ne extends Event{static eventName="valuetypemodechanged";data;constructor(e,t){super(ne.eventName,{composed:!0}),this.data={type:e,mode:t}}}class ie extends Event{static eventName="jumptopointeraddress";data;constructor(e){super(ie.eventName,{composed:!0}),this.data=e}}class se extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-interpreter-display`;#e=this.attachShadow({mode:"open"});#m="Little Endian";#b=new ArrayBuffer(0);#f=new Set;#v=B();#y=0;constructor(){super(),this.#e.adoptedStyleSheets=[j]}connectedCallback(){this.#e.adoptedStyleSheets=[H]}set data(e){this.#b=e.buffer,this.#m=e.endianness,this.#f=e.valueTypes,this.#y=e.memoryLength,e.valueTypeModes&&e.valueTypeModes.forEach(((e,t)=>{F(t,e)&&this.#v.set(t,e)})),this.#r()}#r(){te(oe` <div class="value-types"> ${re.map((e=>this.#f.has(e)?this.#w(e):""))} </div> `,this.#e,{host:this})}#w(e){if(q(e))return this.#x(e);if(W(e))return this.#k(e);throw new Error(`No known way to format ${e}`)}#k(t){const o=this.#I({type:t,signed:!1}),n=G(t,this.#b,this.#m),i=Number.isNaN(n)||BigInt(n)>=BigInt(this.#y),s=ee(i?Q.addressOutOfRange:Q.jumpToPointer),a=i?"var(--color-text-secondary)":"var(--color-primary)";return oe` <span class="value-type-cell-no-mode value-type-cell selectable-text">${e.i18n.lockedString(t)}</span> <div class="value-type-cell"> <div class="value-type-value-with-link" data-value="true"> <span class="selectable-text">${o}</span> ${oe` <button class="jump-to-button" data-jump="true" title="${s}" ?disabled="${i}" @click="${this.#M.bind(this,Number(n))}"> <${r.Icon.Icon.litTagName} .data="${{iconName:"link_icon",color:a,width:"14px"}}"> </${r.Icon.Icon.litTagName}> </button>`} </div> </div> `}#M(e){this.dispatchEvent(new ie(e))}#x(t){return oe` <span class="value-type-cell selectable-text">${e.i18n.lockedString(t)}</span> <div> <select title="${ee(Q.changeValueTypeMode)}" data-mode-settings="true" class="chrome-select" style="border: none; background-color: transparent; cursor: pointer; color: var(--color-text-secondary);" @change="${this.#T.bind(this,t)}"> ${D.filter((e=>F(t,e))).map((o=>oe` <option value="${o}" .selected="${this.#v.get(t)===o}">${e.i18n.lockedString(o)} `))} </select> </div> ${this.#S(t)} `}#S(e){const t=this.#I({type:e,signed:!1}),o=this.#I({type:e,signed:!0}),r=this.#v.get(e),n=o!==t&&"hex"!==r&&"oct"!==r,i=oe`<span class="value-type-cell selectable-text" title="${ee(Q.unsignedValue)}" data-value="true">${t}</span>`;if(!n)return i;const s="Integer 32-bit"===e||"Integer 64-bit"===e,a=oe`<span class="selectable-text" data-value="true" title="${ee(Q.signedValue)}">${o}</span>`;return s?oe` <div class="value-type-cell"> ${i} ${a} </div> `:oe` <div class="value-type-cell" style="flex-direction: row;"> ${i} <span class="signed-divider"></span> ${a} </div> `}#T(e,t){t.preventDefault();const o=t.target.value;this.dispatchEvent(new ne(e,o))}#I(e){const t=this.#v.get(e.type);return J({buffer:this.#b,type:e.type,endianness:this.#m,signed:e.signed||!1,mode:t})}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-interpreter-display",se);var ae=Object.freeze({__proto__:null,ValueTypeModeChangedEvent:ne,JumpToPointerAddressEvent:ie,ValueInterpreterDisplay:se});const ce=new CSSStyleSheet;ce.replaceSync(":host{flex:auto;display:flex;min-height:20px}.settings{display:flex;flex-wrap:wrap;margin:0 12px 12px;column-gap:45px;row-gap:15px}.value-types-selection{display:flex;flex-direction:column}.group{font-weight:bold;margin-bottom:11px}.type-label{white-space:nowrap}.group + .type-label{margin-top:5px}.type-label input{margin:0 6px 0 0;padding:0}.type-label + .type-label{margin-top:6px}\n/*# sourceURL=valueInterpreterSettings.css */\n");const{render:de,html:le}=t,he={otherGroup:"Other"},ge=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/ValueInterpreterSettings.ts",he),ue=e.i18n.getLocalizedString.bind(void 0,ge),pe=new Map([["Integer",["Integer 8-bit","Integer 16-bit","Integer 32-bit","Integer 64-bit"]],["Floating point",["Float 32-bit","Float 64-bit"]],["Other",["Pointer 32-bit","Pointer 64-bit"]]]);class me extends Event{static eventName="typetoggle";data;constructor(e,t){super(me.eventName),this.data={type:e,checked:t}}}class be extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-interpreter-settings`;#e=this.attachShadow({mode:"open"});#f=new Set;connectedCallback(){this.#e.adoptedStyleSheets=[s.checkboxStyles,ce]}set data(e){this.#f=e.valueTypes,this.#r()}#r(){de(le` <div class="settings"> ${[...pe.keys()].map((e=>le` <div class="value-types-selection"> <span class="group">${function(e){return"Other"===e?ue(he.otherGroup):e}(e)}</span> ${this.#E(e)} </div> `))} </div> `,this.#e,{host:this})}#E(e){const t=pe.get(e);if(!t)throw new Error(`Unknown group ${e}`);return le` ${t.map((e=>le` <label class="type-label" title="${U(e)}"> <input data-input="true" type="checkbox" .checked="${this.#f.has(e)}" @change="${t=>this.#A(e,t)}"> <span data-title="true">${U(e)}</span> </label> `))}`}#A(e,t){const o=t.target;this.dispatchEvent(new me(e,o.checked))}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-interpreter-settings",be);var fe=Object.freeze({__proto__:null,TypeToggleEvent:me,ValueInterpreterSettings:be});const ve={toggleValueTypeSettings:"Toggle value type settings",changeEndianness:"Change `Endianness`"},ye=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryValueInterpreter.ts",ve),we=e.i18n.getLocalizedString.bind(void 0,ye),{render:xe,html:ke}=t;class Ie extends Event{static eventName="endiannesschanged";data;constructor(e){super(Ie.eventName),this.data=e}}class Me extends Event{static eventName="valuetypetoggled";data;constructor(e,t){super(Me.eventName),this.data={type:e,checked:t}}}class Te extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-interpreter`;#e=this.attachShadow({mode:"open"});#m="Little Endian";#b=new ArrayBuffer(0);#f=new Set;#v=new Map;#y=0;#$=!1;connectedCallback(){this.#e.adoptedStyleSheets=[C]}set data(e){this.#m=e.endianness,this.#b=e.value,this.#f=e.valueTypes,this.#v=e.valueTypeModes||new Map,this.#y=e.memoryLength,this.#r()}#r(){xe(ke` <div class="value-interpreter"> <div class="settings-toolbar"> ${this.#N()} <button data-settings="true" class="settings-toolbar-button ${this.#$?"active":""}" title="${we(ve.toggleValueTypeSettings)}" @click="${this.#R}"> <${r.Icon.Icon.litTagName} .data="${{iconName:"settings_14x14_icon",color:"var(--color-text-secondary)",width:"14px"}}"> </${r.Icon.Icon.litTagName}> </button> </div> <span class="divider"></span> <div> ${this.#$?ke` <${be.litTagName} .data="${{valueTypes:this.#f}}" @typetoggle="${this.#A}"> </${be.litTagName}>`:ke` <${se.litTagName} .data="${{buffer:this.#b,valueTypes:this.#f,endianness:this.#m,valueTypeModes:this.#v,memoryLength:this.#y}}"> </${se.litTagName}>`} </div> </div> `,this.#e,{host:this})}#L(e){e.preventDefault();const t=e.target.value;this.dispatchEvent(new Ie(t))}#N(){const t=this.#L.bind(this);return ke` <label data-endianness-setting="true" title="${we(ve.changeEndianness)}"> <select class="chrome-select" style="border: none; background-color: transparent; cursor: pointer;" data-endianness="true" @change="${t}"> ${["Little Endian","Big Endian"].map((t=>ke`<option value="${t}" .selected="${this.#m===t}">${e.i18n.lockedString(t)}`))} </select> </label> `}#R(){this.#$=!this.#$,this.#r()}#A(e){this.dispatchEvent(new Me(e.data.type,e.data.checked))}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-interpreter",Te);var Se=Object.freeze({__proto__:null,EndiannessChangedEvent:Ie,ValueTypeToggledEvent:Me,LinearMemoryValueInterpreter:Te});const Ee=/^0x[a-fA-F0-9]+$/,Ae=/^0$|[1-9]\d*$/;function $e(e){const t=e.number.toString(16).padStart(e.pad,"0").toUpperCase();return e.prefix?"0x"+t:t}function Ne(e){return $e({number:e,pad:8,prefix:!0})}function Re(e){const t=e.match(Ee),o=e.match(Ae);let r;return t&&t[0].length===e.length?r=parseInt(e,16):o&&o[0].length===e.length&&(r=parseInt(e,10)),r}var Le=Object.freeze({__proto__:null,HEXADECIMAL_REGEXP:Ee,DECIMAL_REGEXP:Ae,toHexString:$e,formatAddress:Ne,parseAddress:Re});const Oe=new CSSStyleSheet;Oe.replaceSync(":host{flex:auto;display:flex;min-height:20px}.view{overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;background:var(--color-background);outline:none}.row{display:flex;height:20px;align-items:center}.cell{text-align:center;border:1px solid transparent;border-radius:2px}.cell.selected{border-color:var(--color-syntax-3);color:var(--color-syntax-3);background-color:var(--legacy-item-selection-bg-color)}.byte-cell{min-width:21px;color:var(--color-text-primary)}.byte-group-margin{margin-left:var(--byte-group-margin)}.text-cell{min-width:14px;color:var(--color-syntax-3)}.address{color:var(--color-text-disabled)}.address.selected{font-weight:bold;color:var(--color-text-primary)}.divider{width:1px;height:inherit;background-color:var(--color-details-hairline);margin:0 4px}.highlight-area{background-color:var(--color-background-elevation-2)}.cell.focused-area{background-color:var(--color-primary-variant);color:var(--color-button-primary-text)}.cell.focused-area.selected{background:rgb(1 74 195);border-color:var(--color-button-outline-focus)}:host-context(.-theme-with-dark-background) .cell.focused-area.selected{background:rgb(192 216 255);border-color:var(--color-button-outline-focus)}\n/*# sourceURL=linearMemoryViewer.css */\n");const{render:Ce,html:je}=t;class He extends Event{static eventName="byteselected";data;constructor(e){super(He.eventName),this.data=e}}class _e extends Event{static eventName="resize";data;constructor(e){super(_e.eventName),this.data=e}}class Pe extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-viewer`;#e=this.attachShadow({mode:"open"});#O=new ResizeObserver((()=>this.#C()));#j=!1;#H=new Uint8Array;#a=0;#_=0;#P;#o;#z=1;#B=4;#V=!0;#D=void 0;set data(e){if(e.address<e.memoryOffset||e.address>e.memoryOffset+e.memory.length||e.address<0)throw new Error("Address is out of bounds.");if(e.memoryOffset<0)throw new Error("Memory offset has to be greater or equal to zero.");this.#H=e.memory,this.#a=e.address,this.#P=e.highlightInfo,this.#o=e.focusedMemoryHighlight,this.#_=e.memoryOffset,this.#V=e.focus,this.#U()}connectedCallback(){o.SetCSSProperty.set(this,"--byte-group-margin","8px"),this.#e.adoptedStyleSheets=[Oe]}disconnectedCallback(){this.#j=!1,this.#O.disconnect()}#U(){this.#F(),this.#r(),this.#q(),this.#G()}#q(){if(this.#V){const e=this.#e.querySelector(".view");e&&e.focus()}}#C(){this.#U(),this.dispatchEvent(new _e(this.#B*this.#z))}#F(){if(0===this.clientWidth||0===this.clientHeight||!this.shadowRoot)return this.#B=4,void(this.#z=1);const e=this.shadowRoot.querySelector(".byte-cell"),t=this.shadowRoot.querySelector(".text-cell"),o=this.shadowRoot.querySelector(".divider"),r=this.shadowRoot.querySelector(".row"),n=this.shadowRoot.querySelector(".address");if(!(e&&t&&o&&r&&n))return this.#B=4,void(this.#z=1);const i=4*(e.getBoundingClientRect().width+t.getBoundingClientRect().width)+8,s=o.getBoundingClientRect().width,a=e.getBoundingClientRect().left-n.getBoundingClientRect().left,c=this.clientWidth-1-a-s;if(c<i)return this.#B=4,void(this.#z=1);this.#B=4*Math.floor(c/i),this.#z=Math.floor(this.clientHeight/r.clientHeight)}#G(){this.#O&&!this.#j&&(this.#O.observe(this),this.#j=!0)}#r(){Ce(je` <div class="view" tabindex="0" @keydown="${this.#W}"> ${this.#J()} </div> `,this.#e,{host:this})}#W(e){const t=e;let o;"ArrowUp"===t.code?o=this.#a-this.#B:"ArrowDown"===t.code?o=this.#a+this.#B:"ArrowLeft"===t.code?o=this.#a-1:"ArrowRight"===t.code?o=this.#a+1:"PageUp"===t.code?o=this.#a-this.#B*this.#z:"PageDown"===t.code&&(o=this.#a+this.#B*this.#z),void 0!==o&&o!==this.#D&&(this.#D=o,this.dispatchEvent(new He(o)))}#J(){const e=[];for(let t=0;t<this.#z;++t)e.push(this.#K(t));return je`${e}`}#K(e){const{startIndex:o,endIndex:r}={startIndex:e*this.#B,endIndex:(e+1)*this.#B},n={address:!0,selected:Math.floor((this.#a-this.#_)/this.#B)===e};return je` <div class="row"> <span class="${t.Directives.classMap(n)}">${$e({number:o+this.#_,pad:8,prefix:!1})}</span> <span class="divider"></span> ${this.#X(o,r)} <span class="divider"></span> ${this.#Y(o,r)} </div> `}#X(e,o){const r=[];for(let n=e;n<o;++n){const o=n+this.#_,i={cell:!0,"byte-cell":!0,"byte-group-margin":n!==e&&(n-e)%4==0,selected:n===this.#a-this.#_,"highlight-area":this.#Q(o),"focused-area":this.#Z(o)},s=n<this.#H.length,a=s?je`${$e({number:this.#H[n],pad:2,prefix:!1})}`:"",c=s?this.#ee.bind(this,o):"";r.push(je`<span class="${t.Directives.classMap(i)}" @click="${c}">${a}</span>`)}return je`${r}`}#Y(e,o){const r=[];for(let n=e;n<o;++n){const e=n+this.#_,o=this.#Q(e),i=this.#Z(e),s={cell:!0,"text-cell":!0,selected:this.#a-this.#_===n,"highlight-area":o,"focused-area":i},a=n<this.#H.length,c=a?je`${this.#te(this.#H[n])}`:"",d=a?this.#ee.bind(this,n+this.#_):"";r.push(je`<span class="${t.Directives.classMap(s)}" @click="${d}">${c}</span>`)}return je`${r}`}#te(e){return e>=20&&e<=127?String.fromCharCode(e):"."}#ee(e){this.dispatchEvent(new He(e))}#Q(e){return void 0!==this.#P&&(this.#P.startAddress<=e&&e<this.#P.startAddress+this.#P.size)}#Z(e){return!!this.#o&&(this.#o.startAddress<=e&&e<this.#o.startAddress+this.#o.size)}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-viewer",Pe);var ze=Object.freeze({__proto__:null,ByteSelectedEvent:He,ResizeEvent:_e,LinearMemoryViewer:Pe});const{render:Be,html:Ve}=t,De={addressHasToBeANumberBetweenSAnd:"Address has to be a number between {PH1} and {PH2}"},Ue=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryInspector.ts",De),Fe=e.i18n.getLocalizedString.bind(void 0,Ue);class qe extends Event{static eventName="memoryrequest";data;constructor(e,t,o){super(qe.eventName),this.data={start:e,end:t,address:o}}}class Ge extends Event{static eventName="addresschanged";data;constructor(e){super(Ge.eventName),this.data=e}}class We extends Event{static eventName="settingschanged";data;constructor(e){super(We.eventName),this.data=e}}class Je{#a=0;#oe;constructor(e,t){if(e<0)throw new Error("Address should be a greater or equal to zero");this.#a=e,this.#oe=t}valid(){return!0}reveal(){this.#oe(this.#a)}}class Ke extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-inspector`;#e=this.attachShadow({mode:"open"});#re=new n.SimpleHistoryManager.SimpleHistoryManager(10);#H=new Uint8Array;#_=0;#ne=0;#a=-1;#P;#ie="Submitted";#se=`${this.#a}`;#ae=4;#ce=B();#f=new Set(this.#ce.keys());#m="Little Endian";connectedCallback(){this.#e.adoptedStyleSheets=[x]}set data(e){if(e.address<e.memoryOffset||e.address>e.memoryOffset+e.memory.length||e.address<0)throw new Error("Address is out of bounds.");if(e.memoryOffset<0)throw new Error("Memory offset has to be greater or equal to zero.");if(e.highlightInfo){if(e.highlightInfo.size<0)throw new Error("Object size has to be greater than or equal to zero");if(e.highlightInfo.startAddress<0||e.highlightInfo.startAddress>=e.outerMemoryLength)throw new Error("Object start address is out of bounds.")}this.#H=e.memory,this.#_=e.memoryOffset,this.#ne=e.outerMemoryLength,this.#ce=e.valueTypeModes||this.#ce,this.#f=e.valueTypes||this.#f,this.#m=e.endianness||this.#m,this.#P=e.highlightInfo,this.#de(e.address),this.#r()}#r(){const{start:e,end:t}=this.#le(this.#a,this.#ae),o="Submitted"===this.#ie?Ne(this.#a):this.#se,r=this.#he(o),n=Fe(De.addressHasToBeANumberBetweenSAnd,{PH1:Ne(0),PH2:Ne(this.#ne)}),i=r?void 0:n,s=this.#re.canRollback(),a=this.#re.canRollover(),c=this.#P?[this.#P]:[],d=this.#ge(c,this.#a);Be(Ve` <div class="view"> <${L.litTagName} .data="${{address:o,valid:r,mode:this.#ie,error:i,canGoBackInHistory:s,canGoForwardInHistory:a}}" @refreshrequested="${this.#ue}" @addressinputchanged="${this.#p}" @pagenavigation="${this.#pe}" @historynavigation="${this.#me}"></${L.litTagName}> <${y.litTagName} .data="${{highlightInfos:c,focusedMemoryHighlight:d}}" @jumptohighlightedmemory="${this.#be}"> </${y.litTagName}> <${Pe.litTagName} .data="${{memory:this.#H.slice(e-this.#_,t-this.#_),address:this.#a,memoryOffset:e,focus:"Submitted"===this.#ie,highlightInfo:this.#P,focusedMemoryHighlight:d}}" @byteselected="${this.#fe}" @resize="${this.#C}"> </${Pe.litTagName}> </div> <div class="value-interpreter"> <${Te.litTagName} .data="${{value:this.#H.slice(this.#a-this.#_,this.#a+8).buffer,valueTypes:this.#f,valueTypeModes:this.#ce,endianness:this.#m,memoryLength:this.#ne}}" @valuetypetoggled="${this.#ve}" @valuetypemodechanged="${this.#ye}" @endiannesschanged="${this.#we}" @jumptopointeraddress="${this.#be}"> </${Te.litTagName}> </div> `,this.#e,{host:this})}#be(e){e.stopPropagation(),this.#ie="Submitted";const t=Math.max(0,Math.min(e.data,this.#ne-1));this.#xe(t)}#ue(){const{start:e,end:t}=this.#le(this.#a,this.#ae);this.dispatchEvent(new qe(e,t,this.#a))}#fe(e){this.#ie="Submitted";const t=Math.max(0,Math.min(e.data,this.#ne-1));this.#xe(t)}#ke(){return{valueTypes:this.#f,modes:this.#ce,endianness:this.#m}}#we(e){this.#m=e.data,this.dispatchEvent(new We(this.#ke())),this.#r()}#he(e){const t=Re(e);return void 0!==t&&t>=0&&t<this.#ne}#p(e){const{address:t,mode:o}=e.data,r=this.#he(t),n=Re(t);if(this.#se=t,void 0!==n&&r)return this.#ie=o,void this.#xe(n);this.#ie="Submitted"!==o||r?"Edit":"InvalidSubmit",this.#r()}#ve(e){const{type:t,checked:o}=e.data;o?this.#f.add(t):this.#f.delete(t),this.dispatchEvent(new We(this.#ke())),this.#r()}#ye(e){e.stopImmediatePropagation();const{type:t,mode:o}=e.data;this.#ce.set(t,o),this.dispatchEvent(new We(this.#ke())),this.#r()}#me(e){return"Forward"===e.data?this.#re.rollover():this.#re.rollback()}#pe(e){const t="Forward"===e.data?this.#a+this.#ae:this.#a-this.#ae,o=Math.max(0,Math.min(t,this.#ne-1));this.#xe(o)}#xe(e){e<0||e>=this.#ne?console.warn(`Specified address is out of bounds: ${e}`):(this.#de(e),this.#U())}#le(e,t){const o=Math.floor(e/t)*t;return{start:o,end:Math.min(o+t,this.#ne)}}#C(e){this.#ae=e.data,this.#U()}#U(){const{start:e,end:t}=this.#le(this.#a,this.#ae);e<this.#_||t>this.#_+this.#H.length?this.dispatchEvent(new qe(e,t,this.#a)):this.#r()}#de(e){if(this.#a===e)return;const t=new Je(e,(()=>this.#xe(e)));this.#re.push(t),this.#a=e,this.dispatchEvent(new Ge(this.#a))}#ge(e,t){let o;for(const r of e)r.startAddress<=t&&t<r.startAddress+r.size&&(o?r.size<o.size&&(o=r):o=r);return o}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-inspector",Ke);var Xe=Object.freeze({__proto__:null,MemoryRequestEvent:qe,AddressChangedEvent:Ge,SettingsChangedEvent:We,LinearMemoryInspector:Ke});const Ye={noOpenInspections:"No open inspections"},Qe=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryInspectorPane.ts",Ye),Ze=e.i18n.getLocalizedString.bind(void 0,Qe);let et,tt;class ot extends d.Widget.VBox{view;constructor(){super(),this.view=rt.instance()}static instance(e={forceNew:null}){const{forceNew:t}=e;return tt&&!t||(tt=new ot),tt}wasShown(){this.view.show(this.contentElement)}}class rt extends(n.ObjectWrapper.eventMixin(d.Widget.VBox)){#Ie;#Me;constructor(){super(!1);const e=document.createElement("div");e.textContent=Ze(Ye.noOpenInspections),e.style.display="flex",this.#Ie=new d.TabbedPane.TabbedPane,this.#Ie.setPlaceholderElement(e),this.#Ie.setCloseableTabs(!0),this.#Ie.setAllowTabReorder(!0,!0),this.#Ie.addEventListener(d.TabbedPane.Events.TabClosed,this.#Te,this),this.#Ie.show(this.contentElement),this.#Me=new Map}static instance(){return et||(et=new rt),et}getViewForTabId(e){const t=this.#Me.get(e);if(!t)throw new Error(`No linear memory inspector view for the given tab id: ${e}`);return t}create(e,t,o,r){const n=new nt(o,r,e);this.#Me.set(e,n),this.#Ie.appendTab(e,t,n,void 0,!1,!0),this.#Ie.selectTab(e)}close(e){this.#Ie.closeTab(e,!1)}reveal(e,t){const o=this.getViewForTabId(e);void 0!==t&&o.updateAddress(t),this.refreshView(e),this.#Ie.selectTab(e)}refreshView(e){this.getViewForTabId(e).refreshData()}#Te(e){const{tabId:t}=e.data;this.#Me.delete(t),this.dispatchEventToListeners("ViewClosed",t)}}class nt extends d.Widget.VBox{#Se;#a;#Ee;#Ae;firstTimeOpen;constructor(e,t=0,o){if(super(!1),t<0||t>=e.length())throw new Error("Requested address is out of bounds.");this.#Se=e,this.#a=t,this.#Ee=o,this.#Ae=new Ke,this.#Ae.addEventListener(qe.eventName,(e=>{this.#$e(e)})),this.#Ae.addEventListener(Ge.eventName,(e=>{this.updateAddress(e.data)})),this.#Ae.addEventListener(We.eventName,(e=>{e.stopPropagation(),this.saveSettings(e.data)})),this.#Ae.addEventListener(f.eventName,(e=>{ut.instance().removeHighlight(this.#Ee,e.data),this.refreshData()})),this.contentElement.appendChild(this.#Ae),this.firstTimeOpen=!0}wasShown(){this.refreshData()}saveSettings(e){ut.instance().saveSettings(e)}updateAddress(e){if(e<0||e>=this.#Se.length())throw new Error("Requested address is out of bounds.");this.#a=e}refreshData(){ut.getMemoryForAddress(this.#Se,this.#a).then((({memory:e,offset:t})=>{let o,r,n;if(this.firstTimeOpen){const e=ut.instance().loadSettings();o=e.valueTypes,r=e.modes,n=e.endianness,this.firstTimeOpen=!1}this.#Ae.data={memory:e,address:this.#a,memoryOffset:t,outerMemoryLength:this.#Se.length(),valueTypes:o,valueTypeModes:r,endianness:n,highlightInfo:this.#Ne()}}))}#$e(e){const{start:t,end:o,address:r}=e.data;if(r<t||r>=o)throw new Error("Requested address is out of bounds.");ut.getMemoryRange(this.#Se,t,o).then((e=>{this.#Ae.data={memory:e,address:r,memoryOffset:t,outerMemoryLength:this.#Se.length(),highlightInfo:this.#Ne()}}))}#Ne(){const e=ut.instance().getHighlightInfo(this.#Ee);if(void 0!==e){if(e.startAddress<0||e.startAddress>=this.#Se.length())throw new Error("HighlightInfo start address is out of bounds.");if(e.size<=0)throw new Error("Highlight size must be a positive number.")}return e}}var it=Object.freeze({__proto__:null,Wrapper:ot,LinearMemoryInspectorPaneImpl:rt});const st={couldNotOpenLinearMemory:"Could not open linear memory inspector: failed locating buffer."},at=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryInspectorController.ts",st),ct=e.i18n.getLocalizedString.bind(void 0,at),dt=["webassemblymemory","typedarray","dataview","arraybuffer"];let lt;class ht{#Re;constructor(e){this.#Re=e}length(){return this.#Re.byteLength()}async getRange(e,t){const o=Math.min(t,this.length());if(e<0||e>o)return console.error(`Requesting invalid range of memory: (${e}, ${t})`),new Uint8Array(0);const r=await this.#Re.bytes(e,o);return new Uint8Array(r)}}function gt(e){return e instanceof l.DebuggerLanguagePlugins.ValueNode?void 0!==e.inspectableAddress:e instanceof l.DebuggerLanguagePlugins.ExtensionRemoteObject&&void 0!==e.linearMemoryAddress}class ut extends c.TargetManager.SDKModelObserver{#Le=rt.instance();#Oe=new Map;#Ce=new Map;#je;constructor(){super(),c.TargetManager.TargetManager.instance().observeModels(c.RuntimeModel.RuntimeModel,this),c.TargetManager.TargetManager.instance().addModelListener(c.DebuggerModel.DebuggerModel,c.DebuggerModel.Events.GlobalObjectCleared,this.#He,this),this.#Le.addEventListener("ViewClosed",this.#_e.bind(this)),c.TargetManager.TargetManager.instance().addModelListener(c.DebuggerModel.DebuggerModel,c.DebuggerModel.Events.DebuggerPaused,this.#Pe,this);const e=B(),t={valueTypes:Array.from(e.keys()),valueTypeModes:Array.from(e),endianness:"Little Endian"};this.#je=n.Settings.Settings.instance().createSetting("lmiInterpreterSettings",t)}static instance(){return lt||(lt=new ut,lt)}static async getMemoryForAddress(e,t){const o=Math.max(0,t-500),r=o+1e3;return{memory:await e.getRange(o,r),offset:o}}static async getMemoryRange(e,t,o){if(t<0||t>o||t>=e.length())throw new Error("Requested range is out of bounds.");const r=Math.max(o,t+1e3);return await e.getRange(t,r)}async evaluateExpression(e,t){const o=await e.evaluate({expression:t});if("error"in o)console.error(`Tried to evaluate the expression '${t}' but got an error: ${o.error}`);else{if(!("exceptionDetails"in o)||!o?.exceptionDetails?.text)return o.object;console.error(`Tried to evaluate the expression '${t}' but got an exception: ${o.exceptionDetails.text}`)}}saveSettings(e){const t=Array.from(e.valueTypes),o=[...e.modes];this.#je.set({valueTypes:t,valueTypeModes:o,endianness:e.endianness})}loadSettings(){const e=this.#je.get();return{valueTypes:new Set(e.valueTypes),modes:new Map(e.valueTypeModes),endianness:e.endianness}}getHighlightInfo(e){return this.#Ce.get(e)}removeHighlight(e,t){this.getHighlightInfo(e)===t&&this.#Ce.delete(e)}setHighlightInfo(e,t){this.#Ce.set(e,t)}#ze(e){this.#Ce.delete(e)}static async retrieveDWARFMemoryObjectAndAddress(e){if(e instanceof l.DebuggerLanguagePlugins.ExtensionRemoteObject){const t=e,o=e.linearMemoryAddress;if(void 0===o)return;const r=t.callFrame,i=await e.debuggerModel().agent.invoke_evaluateOnCallFrame({callFrameId:r.id,expression:"memories[0]"}),s=i.getError();s&&(console.error(s),n.Console.Console.instance().error(ct(st.couldNotOpenLinearMemory)));return{obj:e.debuggerModel().runtimeModel().createRemoteObject(i.result),address:o}}if(!(e instanceof l.DebuggerLanguagePlugins.ValueNode))return;const t=e,o=t.inspectableAddress||0,r=t.callFrame,i=await e.debuggerModel().agent.invoke_evaluateOnCallFrame({callFrameId:r.id,expression:"memories[0]"}),s=i.getError();s&&(console.error(s),n.Console.Console.instance().error(ct(st.couldNotOpenLinearMemory)));const a=e.debuggerModel().runtimeModel();return{obj:e=a.createRemoteObject(i.result),address:o}}static extractObjectSize(e){if(e instanceof l.DebuggerLanguagePlugins.ExtensionRemoteObject)return e.linearMemorySize??0;let t=e.sourceType.typeInfo;const o=t.members.filter((e=>"*"===e.name));if(1===o.length){const r=o[0].typeId,n=e.sourceType.typeMap.get(r)?.typeInfo;if(void 0===n)throw new Error(`Cannot find the source type information for typeId ${r}.`);t=n}else if(o.length>1)throw new Error("The number of pointers in typeInfo.members should not be greater than one.");return t.size}static extractObjectTypeDescription(e){const t=e.description;if(!t)return"";const o=t.charAt(t.length-1),r=t.charAt(t.length-2);return"*"===o||"&"===o?" "===r?t.slice(0,t.length-2):t.slice(0,t.length-1):t}static extractObjectName(e,t){const o=e.description?.charAt(e.description.length-1);return"*"===o?"*"+t:t}async openInspectorView(e,t,o){const r=await ut.retrieveDWARFMemoryObjectAndAddress(e);let n=e,i=t;void 0!==r&&(i=r.address,n=r.obj),void 0!==i?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.DWARFInspectableAddress):"arraybuffer"===n.subtype?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.ArrayBuffer):"dataview"===n.subtype?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.DataView):"typedarray"===n.subtype?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.TypedArray):(console.assert("webassemblymemory"===n.subtype),a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.WebAssemblyMemory));const s=await async function(e){console.assert("object"===e.type),console.assert(void 0!==e.subtype&&dt.includes(e.subtype));const t=await e.runtimeModel().agent.invoke_callFunctionOn({objectId:e.objectId,functionDeclaration:"function() { return this instanceof ArrayBuffer || (typeof SharedArrayBuffer !== 'undefined' && this instanceof SharedArrayBuffer) ? this : this.buffer; }",silent:!0,objectGroup:"linear-memory-inspector"}),o=t.getError();if(o)throw new Error(`Remote object representing ArrayBuffer could not be retrieved: ${o}`);return e=e.runtimeModel().createRemoteObject(t.result),new c.RemoteObject.RemoteArrayBuffer(e)}(n),{internalProperties:l}=await s.object().getOwnProperties(!1),h=l?.find((({name:e})=>"[[ArrayBufferData]]"===e)),g=h?.value?.value;if(!g)throw new Error("Unable to find backing store id for array buffer");const u=l?.find((({name:e})=>"[[WebAssemblyMemory]]"===e)),p=u?.value,m=ut.extractHighlightInfo(e,o);if(m?this.setHighlightInfo(g,m):this.#ze(g),this.#Oe.has(g))return this.#Le.reveal(g,i),void d.ViewManager.ViewManager.instance().showView("linear-memory-inspector");const b=String(p?p.description:s.object().description);this.#Oe.set(g,s.object());const f=new ht(s);this.#Le.create(g,b,f,i),d.ViewManager.ViewManager.instance().showView("linear-memory-inspector")}static extractHighlightInfo(e,t){if(!(e instanceof l.DebuggerLanguagePlugins.ValueNode||e instanceof l.DebuggerLanguagePlugins.ExtensionRemoteObject))return;const o=(e instanceof l.DebuggerLanguagePlugins.ExtensionRemoteObject?e.linearMemoryAddress:e.inspectableAddress)??0;let r;try{r={startAddress:o,size:ut.extractObjectSize(e),name:t?ut.extractObjectName(e,t):t,type:ut.extractObjectTypeDescription(e)}}catch(e){r=void 0}return r}modelRemoved(e){for(const[t,o]of this.#Oe)e===o.runtimeModel()&&(this.#Oe.delete(t),this.#ze(t),this.#Le.close(t))}#Pe(e){const t=e.data;for(const[e,o]of this.#Oe)if(t.runtimeModel()===o.runtimeModel()){const o=t.debuggerPausedDetails()?.callFrames[0];o?this.updateHighlightedMemory(e,o).then((()=>this.#Le.refreshView(e))):(this.#ze(e),this.#Le.refreshView(e))}}#He(e){this.modelRemoved(e.data.runtimeModel())}#_e({data:e}){const t=this.#Oe.get(e);t&&t.release(),this.#Oe.delete(e),this.#ze(e)}async updateHighlightedMemory(e,t){const o=this.getHighlightInfo(e),r=o?.name;if(!o||!r)return void this.#ze(e);const n=await this.evaluateExpression(t,r);if(!n)return void this.#ze(e);const i=ut.extractHighlightInfo(n,r);i&&this.#Be(i,o)?this.setHighlightInfo(e,i):this.#ze(e)}#Be(e,t){return e.type===t.type&&e.startAddress===t.startAddress}}var pt=Object.freeze({__proto__:null,ACCEPTED_MEMORY_TYPES:dt,RemoteArrayBufferWrapper:ht,isDWARFMemoryObject:gt,isMemoryObjectProperty:function(e){return!!("object"===e.type&&e.subtype&&dt.includes(e.subtype)||gt(e))},LinearMemoryInspectorController:ut}),mt=Object.freeze({__proto__:null});export{w as LinearMemoryHighlightChipList,Xe as LinearMemoryInspector,pt as LinearMemoryInspectorController,it as LinearMemoryInspectorPane,Le as LinearMemoryInspectorUtils,O as LinearMemoryNavigator,Se as LinearMemoryValueInterpreter,ze as LinearMemoryViewer,mt as LinearMemoryViewerUtils,ae as ValueInterpreterDisplay,Y as ValueInterpreterDisplayUtils,fe as ValueInterpreterSettings};
